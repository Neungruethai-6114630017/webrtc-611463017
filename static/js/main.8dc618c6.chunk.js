(this["webpackJsonp611463017-finalproject"]=this["webpackJsonp611463017-finalproject"]||[]).push([[0],{164:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),i=c(10),r=c.n(i),l=(c(71),c(27)),j=c(9),a=c(62),o=c.n(a),d=c(63),b=c.n(d),h=c(5),O=c(1),u=new o.a,x=u.connect(),m=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],s=t[1],i=Object(n.useState)(""),r=Object(j.a)(i,2),a=r[0],o=r[1],d=Object(n.useState)(),m=Object(j.a)(d,2),f=m[0],p=m[1],g=Object(n.useState)(!1),y=Object(j.a)(g,2),v=y[0],C=y[1],F=Object(n.useState)(!1),w=Object(j.a)(F,2),S=w[0],k=w[1],D=Object(n.useState)(),N=Object(j.a)(D,2),I=N[0],M=N[1],z=Object(n.useState)([]),B=Object(j.a)(z,2),E=B[0],T=B[1],L=Object(n.useState)(),U=Object(j.a)(L,2),P=U[0],R=U[1],W=Object(n.useState)([]),J=Object(j.a)(W,2),V=J[0],_=J[1],K=Object(n.useState)(!1),Y=Object(j.a)(K,2),q=Y[0],A=Y[1],G=Object(n.useState)(!1),H=Object(j.a)(G,2),Q=H[0],X=H[1],Z=Object(n.useState)(!1),$=Object(j.a)(Z,2),ee=$[0],te=$[1],ce=Object(n.useState)(!1),ne=Object(j.a)(ce,2),se=ne[0],ie=ne[1],re=Object(n.useState)(!1),le=Object(j.a)(re,2),je=le[0],ae=le[1],oe=Object(n.useRef)(),de=Object(n.useRef)();document.title=c,Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){p(e),oe.current&&(oe.current.srcObject=e)})),u.on("open",(function(e){s(e)})),u.on("connection",(function(e){C(!0),x=e,e.on("data",(function(e){"id"==e.type?o(e.id):"message"==e.type?Oe(e):"file"==e.type&&ue(e)}))})),u.on("disconnect",(function(){C(!1)})),u.on("call",(function(e){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.answer(t),e.on("stream",(function(e){de.current.srcObject=e}))})).catch((function(e){console.error("Failed to get local stream",e)}))}))}),[T]);var be,he,Oe=function(e){T((function(t){return[].concat(Object(l.a)(t),[{message:e.message,owner:!1}])}))},ue=function(e){var t=new Blob([e.file],{type:e.filetype}),c=URL.createObjectURL(t);xe({name:e.filename,url:c,size:e.size})},xe=function(e){var t={name:e.name,url:e.url,size:e.size};_((function(e){return[].concat(Object(l.a)(e),[t])}))};f&&(be=Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:oe,autoPlay:!0,style:{maxWidth:"100%"}})),de&&(he=Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:de,autoPlay:!0,style:{maxWidth:"100%"}}));var me=function(){te(!ee)},fe=function(){x.send({type:"message",message:I}),T((function(e){return[].concat(Object(l.a)(e),[{message:I,owner:!0}])})),M("")};return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(h.j,{children:Object(O.jsxs)(h.d,{className:"mt-2 mb-2",children:[Object(O.jsx)(h.e,{children:v?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(h.l,{children:Object(O.jsx)("center",{children:Object(O.jsx)(h.h,{md:"3",children:ee?Object(O.jsx)(h.b,{theme:"danger",onMouseLeave:me,onClick:function(){u.destroy(),window.location.reload(!1)},style:{cursor:"pointer"},children:Object(O.jsx)("h4",{style:{marginBottom:"0",padding:"5px",color:"#FFF"},children:"DisConnect"})}):Object(O.jsx)(h.b,{theme:"success",onMouseEnter:me,children:Object(O.jsx)("h4",{style:{marginBottom:"0",padding:"5px",color:"#FFF"},children:"Connected"})})})})})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(h.l,{children:[Object(O.jsx)(h.l,{children:Object(O.jsxs)(h.h,{children:[Object(O.jsxs)("h4",{children:[Object(O.jsx)(h.b,{className:"mr-3",theme:"info",children:"My ID"}),Object(O.jsx)("label",{style:{cursor:"pointer"},id:"myId",onClick:function(){X(!Q),navigator.clipboard.writeText(c)},children:c})]}),Object(O.jsx)(h.m,{open:q,toggle:function(){A(!q)},target:"#myId",children:Q?"Copied":"Clicke to Coppy"})]})}),Object(O.jsxs)(h.l,{children:[Object(O.jsx)(h.h,{md:"10",children:Object(O.jsxs)("div",{className:"form-floating mb-3",children:[Object(O.jsx)("input",{type:"text",className:"form-control",id:"friendID",placeholder:"Enter Friend ID",value:a,onChange:function(e){return function(e){o(e.target.value),e.target.value.length>10?k(!0):k(!1)}(e)}}),Object(O.jsx)("label",{htmlFor:"friendID",children:"Enter Friend ID"})]})}),Object(O.jsx)(h.h,{md:"2",children:S?Object(O.jsx)(h.c,{size:"lg",pill:!0,theme:"success",onClick:function(){x=u.connect(a),C(!0),x.on("open",(function(){x.send({type:"id",id:a})})),x.on("data",(function(e){"message"==e.type?Oe(e):"file"==e.type&&ue(e)})),u.on("error",(function(e){"peer-unavailable"===e.type&&alert("The id or peer you're trying to connect to does not exist.")})),u.call(a,f).on("stream",(function(e){de.current.srcObject=e}))},children:"Connect"}):Object(O.jsx)(h.c,{size:"lg",pill:!0,theme:"success",disabled:!0,children:"Connect"})})]})]})})}),Object(O.jsxs)(h.l,{className:"mt-2",children:[Object(O.jsxs)(h.h,{md:"6",children:[Object(O.jsx)("center",{children:Object(O.jsxs)(h.a,{style:{marginBottom:"0"},children:["My Video | ID : ",c]})}),be]}),Object(O.jsxs)(h.h,{children:[Object(O.jsx)("center",{children:Object(O.jsxs)(h.a,{theme:"secondary",style:{marginBottom:"0"},children:["Friend Video ",a?"| ID : ".concat(a):""]})}),v?he:Object(O.jsx)("h3",{className:"text-center",style:{marginTop:"20%",color:"#ccc"},children:"No video yet"})]})]}),v?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{class:"row",children:[Object(O.jsx)("div",{class:"col-sm-6",children:Object(O.jsx)("div",{class:"card",children:Object(O.jsx)("div",{class:"card-body",children:Object(O.jsxs)(h.d,{children:[Object(O.jsxs)(h.g,{style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},onClick:function(){ie(!se)},children:[Object(O.jsx)("div",{children:Object(O.jsx)("b",{children:"Chat With Your Friend"})}),Object(O.jsx)("div",{className:"text-right",children:"\u25bc"})]}),Object(O.jsxs)(h.i,{open:se,children:[Object(O.jsx)(h.e,{children:Object(O.jsx)(h.l,{children:E&&E.map((function(e,t){return Object(O.jsx)(h.h,{md:"12",className:e.owner?"text-right":"text-left",children:Object(O.jsxs)(h.c,{outline:!0,pill:!0,theme:e.owner?"Success":"secondary",className:"mb-1",children:[" ",e.message," "]})})}))})}),Object(O.jsx)(h.f,{children:Object(O.jsxs)(h.l,{children:[Object(O.jsx)(h.h,{md:"9",children:Object(O.jsx)(h.k,{placeholder:"Enter Message",value:I,onKeyDown:function(e){"Enter"===e.key&&fe()},onChange:function(e){return M(e.target.value)}})}),Object(O.jsx)(h.h,{md:"3",className:"text-right",children:Object(O.jsx)(h.c,{onClick:fe,children:"Send Message"})})]})})]})]})})})}),Object(O.jsx)("div",{class:"col-sm-6",children:Object(O.jsx)("div",{class:"card",children:Object(O.jsx)("div",{class:"card-body",children:Object(O.jsxs)(h.d,{children:[Object(O.jsxs)(h.g,{theme:"secondary",style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},onClick:function(){ae(!je)},children:[Object(O.jsx)("div",{children:Object(O.jsx)("b",{children:"Sharing Files"})}),Object(O.jsx)("div",{children:"\u25bc"})]}),Object(O.jsxs)(h.i,{open:je,children:[Object(O.jsx)(h.e,{children:Object(O.jsx)("div",{children:Object(O.jsx)("ul",{class:"list-group",children:V&&V.map((function(e,t){return Object(O.jsxs)("li",{class:"list-group-item d-flex justify-content-between align-items-center",children:[Object(O.jsx)("a",{href:e.url,download:e.name,children:e.name}),Object(O.jsx)("span",{class:"badge bg-primary rounded-pill",children:b()(e.size)})]},t)}))})})}),Object(O.jsx)(h.f,{children:Object(O.jsxs)(h.l,{children:[Object(O.jsx)(h.h,{md:"9",children:Object(O.jsx)(h.k,{type:"file",onChange:function(e){return R(e.target.files)}})}),Object(O.jsx)(h.h,{md:"3",className:"text-right",children:Object(O.jsx)(h.c,{onClick:function(){var e=P[0];if(e.size<=5242880){var t=new Blob(P,{type:e.type});x.send({type:"file",file:t,filename:e.name,filetype:e.type,size:e.size})}else alert("The file is larger than 5 MB.")},children:"Send File"})})]})})]})]})})})})]})}):""]})})})},f=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,165)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),i(e),r(e)}))};c(162),c(163);r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(m,{})}),document.getElementById("root")),f()},71:function(e,t,c){},72:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=72}},[[164,1,2]]]);
//# sourceMappingURL=main.8dc618c6.chunk.js.map